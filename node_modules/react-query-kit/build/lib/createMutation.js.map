{"version":3,"file":"createMutation.js","sources":["../../src/createMutation.ts"],"sourcesContent":["import { useMutation } from '@tanstack/react-query'\nimport type { QueryClient, UseMutationOptions } from '@tanstack/react-query'\nimport type {\n  CompatibleWithV4,\n  MutationHook,\n  MutationHookOptions,\n} from './types'\n\nexport interface CreateMutationOptions<TData, TError, TVariables, TContext>\n  extends UseMutationOptions<TData, TError, TVariables, TContext> {\n  useDefaultOptions?: () => MutationHookOptions<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n}\n\nexport function createMutation<\n  TData = unknown,\n  TVariables = void,\n  TError = unknown,\n  TContext = unknown\n>(\n  {\n    useDefaultOptions,\n    ...defaultOptions\n  }: CreateMutationOptions<TData, TError, TVariables, TContext>,\n  queryClient?: CompatibleWithV4<QueryClient, void>\n): MutationHook<TData, TError, TVariables> {\n  const getKey = () => defaultOptions.mutationKey\n\n  const useGeneratedMutation = (\n    options?: MutationHookOptions<TData, TError, TVariables, TContext>\n  ) => {\n    return useMutation(\n      {\n        ...defaultOptions,\n        ...useDefaultOptions?.(),\n        ...options,\n      },\n      queryClient\n    )\n  }\n\n  return Object.assign(useGeneratedMutation, {\n    getKey,\n    mutationFn: defaultOptions.mutationFn,\n  }) as MutationHook<TData, TError, TVariables>\n}\n"],"names":["createMutation","useDefaultOptions","defaultOptions","queryClient","getKey","mutationKey","useGeneratedMutation","options","useMutation","Object","assign","mutationFn"],"mappings":";;;;;;AAkBO,SAASA,cAAT,CAML;EACEC,iBADF;EAEE,GAAGC,cAAAA;AAFL,CANK,EAULC,WAVK,EAWoC;AACzC,EAAA,MAAMC,MAAM,GAAG,MAAMF,cAAc,CAACG,WAApC,CAAA;;EAEA,MAAMC,oBAAoB,GACxBC,OAD2B,IAExB;AACH,IAAA,OAAOC,sBAAW,CAChB,EACE,GAAGN,cADL;AAEE,MAAA,IAAGD,iBAAH,IAAA,IAAA,GAAA,KAAA,CAAA,GAAGA,iBAAiB,EAApB,CAFF;MAGE,GAAGM,OAAAA;KAJW,EAMhBJ,WANgB,CAAlB,CAAA;GAHF,CAAA;;AAaA,EAAA,OAAOM,MAAM,CAACC,MAAP,CAAcJ,oBAAd,EAAoC;IACzCF,MADyC;IAEzCO,UAAU,EAAET,cAAc,CAACS,UAAAA;AAFc,GAApC,CAAP,CAAA;AAID;;;;"}